(function(e){if(!e.support.cors&&e.ajaxTransport&&window.XDomainRequest){var C=/^https?:\/\//i,E=/^get|post$/i,K=new RegExp("^"+location.protocol,"i"),H=/text\/html/i,I=/\/json/i,J=/\/xml/i;e.ajaxTransport("* text html xml json",function(n,h,L){if(n.crossDomain&&n.async&&E.test(n.type)&&C.test(n.url)&&K.test(n.url)){var f=null,q=(h.dataType||"").toLowerCase();return{send:function(C,y){f=new XDomainRequest;/^\d+$/.test(h.timeout)&&(f.timeout=h.timeout);f.ontimeout=function(){y(500,"timeout")};f.onload=
function(){var t="Content-Length: "+f.responseText.length+"\r\nContent-Type: "+f.contentType,h=200,n="success",z={text:f.responseText};try{if("html"===q||H.test(f.contentType))z.html=f.responseText;else if("json"===q||"text"!==q&&I.test(f.contentType))try{z.json=e.parseJSON(f.responseText)}catch(C){h=500,n="parseerror"}else if("xml"===q||"text"!==q&&J.test(f.contentType)){var u=new ActiveXObject("Microsoft.XMLDOM");u.async=!1;try{u.loadXML(f.responseText)}catch(D){u=void 0}if(!u||!u.documentElement||
u.getElementsByTagName("parsererror").length)throw h=500,n="parseerror","Invalid XML: "+f.responseText;z.xml=u}}catch(E){throw E;}finally{y(h,n,z,t)}};f.onprogress=function(){};f.onerror=function(){y(500,"error",{text:f.responseText})};var D="";h.data&&(D="string"===e.type(h.data)?h.data:e.param(h.data));f.open(n.type,n.url);f.send(D)},abort:function(){f&&f.abort()}}}})}})(jQuery);window.DDC=window.DDC||{};
DDC.Video=function(e){function C(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?parseInt(a.split("msie")[1],10):!1}function E(){var a=e.Deferred();S=a.promise();e.ajax({url:DDC.Video.jwplayerPath,dataType:"script",cache:!0}).fail(function(b,c,d){window.console&&window.console.log&&console.log("Videoplayer unable to load jwplayer script");a.reject()}).done(function(b,c){window.jwplayer.key="CuRkq2mEg9sCOY9v/r3gGjfwpRHO+3kZk713oA==";a.resolve()})}function K(){var a=e.Deferred();
T=a.promise();e.ajax({url:X,dataType:"script",cache:!0}).fail(function(b,c,d){window.console&&window.console.log&&console.log("Videoplayer DDC Tracker not found.");a.reject()}).done(function(b,c){a.resolve()})}function H(a){var b;a instanceof l&&!this.getWrapper(a.options.targetid)&&(this.wrappers.push(a),b=a);return b}function I(a){var b,c;"string"===typeof a?b=a:a instanceof jQuery&&(b=a.attr("id"));if(a)for(a=this.wrappers.length-1;0<=a;a--)if(this.wrappers[a].options.targetid===b||this.wrappers[a].options.playerid===
b){c=this.wrappers[a];break}return c}function J(a){return h.call(this,D,a)}function n(a){return h.call(this,Q,a)}function h(a,b){var c,d;"string"===typeof a&&l.prototype[a]&&"function"===typeof l.prototype[a]&&(a=l.prototype[a]);window.jwplayer||E();DDC.Tracker||K();A.ga||A.ddc||(A=u(A,Y));this instanceof p?(c=this,c.options=f(c.options,b)):(b=f(U,b),c=new p(b));(d=y(c.options))&&0<d.length&&d.each(function(b,d){var g,k=e.extend(!0,{},c.options);g=e(d);var r="ddc-jwplayer-"+DDC.Video.wrappers.length;
k.targetid||(g.attr("id")?k.targetid=g.attr("id"):(k.targetid=r+"-target",g.attr("id",k.targetid)));k.target=g;g=DDC.Video.getWrapper(k.targetid);g||(k.playerid||(k.playerid=r),g=new l(k),c.addWrapper(g),H.call(DDC.Video,g));if("function"===typeof a)try{a.call(g,k)}catch(f){window.console&&window.console.log&&console.log("Not able to run function on wrapper")}});return c}function L(a){var b;this instanceof p?b=this:(b=new p,b.wrappers=[],b.init());for(var c=this.wrappers.length-1;0<=c;c--)b.wrappers[c]instanceof
l&&(b.wrappers[c].onEmbedReadyCallback=a);return b}function f(a,b){var c={};a=a&&"object"===typeof a?q(a):{};b=b&&"object"===typeof b?q(b):{};e.extend(!0,c,a,b);return c}function q(a){var b={},c,d;for(d in a)if(a.hasOwnProperty(d))switch(c=d.toString().toLowerCase(),c){case "autoplay":if(!0===a[d]||"true"===a[d])b.autostart=!0;break;case "divname":b.targetid=a[d];break;case "height":case "width":b[c]=0<a[d].toString().indexOf("%")?parseInt(a[d],10)+"%":parseInt(a[d],10).toString();break;case "ddcplaylist":case "ddcplaylisturl":case "playlistxmlpath":b.ddcplaylist=
t(a[d]);break;case "postrollxmlpath":b.postrollplaylist=t(a[d]);break;case "prerollxmlpath":b.prerollplaylist=t(a[d]);break;case "showcontrols":b.controls=a[d];break;case "allowfullscreen":case "calltoactionpath":case "overlaypath":case "showplaylist":case "swfid":break;default:b[c]=a[d]}return b}function V(a,b){var c={},d;a.locale&&a.localeskin&&(d=DDC.Video.localeSkins,d.hasOwnProperty(a.localeskin)&&d[a.localeskin].hasOwnProperty(a.locale)&&(a.jwsettings.skin=d[a.localeskin][a.locale]));for(var v in a)"jwsettings"===
v?e.extend(!0,c,a.jwsettings):"jwplaylist"===v?c.playlist=a.jwplaylist:a.hasOwnProperty(v)&&!U.hasOwnProperty(v)&&(c[v]=a[v]);return c=e.extend(!0,{},b,c)}function y(a,b){var c=e(),d,v,f=/[A-Za-z]/;"object"==typeof a&&(d=a.target,v=a.targetid,b&&b.jwPlayerInstance?b.options.target instanceof jQuery&&(c=b.options.target):d instanceof jQuery?c=d:v?f.test(v[0])&&(c=e("#"+v)):d?c=e(d):window.console&&window.console.log&&console.log("Videoplayer unable to find embed target."));return c}function D(a){var b,
c,d={file:void 0};this instanceof p?(this.initAll(a),b=null):this instanceof l?(b=this,b.options=f(this.options,a)):b=new l(a);b&&((c=y(b.options,b))&&1==c.length&&(b.options=f(b.options,f(P(c),a))),b.options.videourl?(d.file=b.options.videourl,b.options.jwplaylist.push(d)):b.playlistPromise||(b.mainPlaylistPromise=z(b.options.ddcplaylist,b.options.locale),b.options.useprepostroll||b.options.postrollplaylist||b.options.prerollplaylist?(a=b.options.prerollplaylist?t(b.options.prerollplaylist):t(Z.replace("%INIT%",
b.options.accountid.slice(0,1)).replace("%ID%",b.options.accountid)),c=b.options.postrollplaylist?t(b.options.postrollplaylist):t(aa.replace("%INIT%",b.options.accountid.slice(0,1)).replace("%ID%",b.options.accountid)),e.cookie&&e.cookie("prerollViewed")?b.prerollPlaylistPromise=e.Deferred().resolve():b.prerollPlaylistPromise=z(a,b.options.locale,d),b.postrollPlaylistPromise=z(c,b.options.locale,d),b.playlistPromise=e.when(b.prerollPlaylistPromise,b.mainPlaylistPromise,b.postrollPlaylistPromise).done(function(a,
c,d){var e=[];c&&c.file&&(a&&a.file&&(a.image=c.image,b.hasPreroll=!0,e.push(a)),e.push(c),d&&d.file&&e.push(d));b.options.jwplaylist=e})):b.playlistPromise=e.when(b.mainPlaylistPromise).done(function(a){var c=[];a&&a.file&&(c.push(a),b.options.jwplaylist=c)})));return b}function t(a){var b;"string"==typeof a&&(b=0!==a.indexOf("http:")&&0!==a.indexOf("https:")||0===a.indexOf(window.location.hostname.toString())||!DDC.Video.proxyPath?a:DDC.Video.proxyPath+encodeURIComponent(a),b=b.replace(/\+/g,"%20"));
return b}function M(a){var b;"string"==typeof a&&(b=0===a.indexOf(DDC.Video.proxyPath)?decodeURIComponent(a.substring(DDC.Video.proxyPath.length,a.length+1)):a,b=b.replace(/\+/g,"%20"));return b}function P(a){var b={},c,d,e,b={};e=a.attr("ddcplayerinfo");c=a.attr("hyphenatedaccountId");d=a.attr("autoplay");b=a.data();b=q(b);c=c||b.accountid;e=e||b.ddcplayerinfo;b.autoplay=d||b.autoplay;e&&(c&&(e=e.replace(c,"<siteId>")),d=e.split("-"),d[0]&&(b.ddcplaylist=c?d[0].replace("<siteId>",c):d[0],b.ddcplaylist=
t(decodeURIComponent(b.ddcplaylist))),b.width=a.get(0).style.width||d[1],b.height=a.get(0).style.height||d[2]);return b}function z(a,b,c){var d=e.Deferred();b=d.promise();a&&e.ajax({url:"http:"==a.slice(0,5)?window.location.protocol+a.slice(5):a,dataType:"text"}).fail(function(b,c,d){window.console&&window.console.log&&console.log("Videoplayer unable to load playlist "+a+" ("+M(a)+"): "+d)}).complete(function(b,f){if("success"==f){var g=b.responseText,k,r,w,F,x,h,l=DDC.i18n?N("VIDEOPLAYER_QUALITY_HIGH"):
"High",m=DDC.i18n?N("VIDEOPLAYER_QUALITY_LOW"):"Low",n=DDC.i18n?N("VIDEOPLAYER_CAPTIONS_ON"):"On",p=c||{file:F,image:x,sources:[{file:w,label:l},{file:r,label:m}],tracks:[{file:h,label:n,kind:"captions"}]},q={};try{k=e.parseXML(g.replace(/^\s+|\s+$/g,""))}catch(u){window.console&&window.console.log&&console.log("Videoplayer error reading XML file",u,g),k=null}k=e(k).find("segment");-1<a.indexOf("vidauth.au")?0<k.length&&(w=k.find("h264HighSource").text().replace(/&amp;/g,"&"),r=k.find("h264LowSource").text().replace(/&amp;/g,
"&"),F=w,x=k.find("largeThumb").text().replace(/&amp;/g,"&"),h=""):(g=M(a),g=g.substring(0,g.lastIndexOf("/")+1),0<k.length&&((w=k.attr("h264_high_src")||k.attr("flv_high_src")||"")&&0!==w.indexOf("http:")&&0!==w.indexOf("https:")&&(w=g+w),(r=k.attr("h264_low_src")||k.attr("flv_low_src")||"")&&0!==r.indexOf("http:")&&0!==r.indexOf("https:")&&(r=g+r),F=w||r||void 0,(x=k.attr("lrgThumb")||"")&&0!==x.indexOf("http:")&&0!==x.indexOf("https:")&&(x=g+x),(h=k.attr("srt")||"")&&(h=0!==h.indexOf("http:")&&
0!==h.indexOf("https:")?t(g+h):t(h))));F&&p.hasOwnProperty("file")&&(q.file=F);x&&p.hasOwnProperty("image")&&(q.image=x);w&&r&&p.hasOwnProperty("sources")&&(q.sources=[{file:w,label:l},{file:r,label:m}]);h&&p.hasOwnProperty("tracks")&&(q.tracks=[{file:h,label:n,kind:"captions"}]);d.resolve(q)}else d.resolve()});return b}function Q(a){var b,c;if(this instanceof p)this.embedAll(a),b=null;else if(this instanceof l&&(b=this,a))try{b.init(a)}catch(d){window.console&&window.console.log&&console.log("Videoplayer error initializing",
d)}b&&((c=y(b.options,b))&&1==c.length?(b.options=f(b.options,f(P(c),a)),e.when(S,b.playlistPromise).then(function(){b.onEmbed()})):c&&1<c.length?window.console&&window.console.log&&console.log("Videoplayer has multiple conflicting video embed target ids"):window.console&&window.console.log&&console.log("Videoplayer could not find embed target element",c));return b}function u(a,b){a.trackEvent=function(a){if(a.hasOwnProperty("eventName"))switch(a.eventName){case "play":a.hasOwnProperty("videoPath")&&
a.hasOwnProperty("playlistPath")&&(this.hasOwnProperty("ddc")&&this.ddcTrackPlayEvent(a.videoPath,a.playlistPath),this.hasOwnProperty("ga")&&this.gaTrackPlayEvent(a.videoPath,a.playlistPath));break;case "progress":a.hasOwnProperty("videoPath")&&a.hasOwnProperty("playlistPath")&&a.hasOwnProperty("progress")&&(this.hasOwnProperty("ddc")&&this.ddcTrackProgressEvent(a.videoPath,a.playlistPath,a.progress),this.hasOwnProperty("ga")&&this.gaTrackProgressEvent(a.videoPath,a.playlistPath,a.progress))}};a.hasOwnProperty("ddc")&&
(DDC.Tracker?R(a,b):T.done(function(){R(a,b)}).fail(function(){window.console&&window.console.log&&console.log("Videoplayer DDC Tracker not available")}));a.hasOwnProperty("ga")&&(DDC.Tracker&&DDC.gaManager?delete a.ga:W(a,b));return a}function R(a,b){var c=b.ddc.viewTypeVideo;a.ddc=DDC.Tracker;a.ddc.deploy();a.ddcTrackPlayEvent=function(a,b){this.ddcTrackProgressEvent(a,b,"0")};a.ddcTrackProgressEvent=function(a,b,c){this.ddcTrack(a+"|"+b+"|0|"+c)};a.ddcTrack=function(b){a.ddc.track(c,b)};return a}
function W(a,b){var c=b.ga.id,d=b.ga.category;a.ga=window._gaq=window._gaq||[];a.gaTrackPlayEvent=function(a,b){this.gaTrack(d,"play",b)};a.gaTrackProgressEvent=function(a,b,c){this.gaTrack(d,"viewed "+c+"%",b)};a.gaTrack=function(b,d,e,f,r){a.ga.push(function(){_gat._getTracker(c)._trackEvent(b,d,e,f,r)})}}var m={},G=window.location.protocol+"//static.dealer.com/",ba=G+"global/media/js/ddc/apis/videoplayer/v2/jwplayer/v6.5/jwplayer.js",O=G+"global/media/js/ddc/apis/videoplayer/v2/jwplayer/v6.5/jwplayer.flash.swf",
ca=G+"global/media/js/ddc/apis/videoplayer/v2/jwplayer/v6.5/jwplayer.html5.js",Z=window.location.protocol+"//videos2.dealer.com/clients/%INIT%/%ID%/preroll.xml",aa=window.location.protocol+"//videos2.dealer.com/clients/%INIT%/%ID%/postroll.xml",B=G+"global/media/js/ddc/apis/videoplayer/v2/jwplayer/v6.5/skins/",B={glowddc:{en_US:B+"glowddc/glowddc_en.xml",en_CA:B+"glowddc/glowddc_en.xml",es_US:B+"glowddc/glowddc_es.xml",fr_CA:B+"glowddc/glowddc_fr.xml"}},O={primary:C()&&10>C()?"flash":"html5",flashplayer:O,
html5player:ca,width:480,height:270,stretching:"uniform",skin:B.glowddc.en_US},U={target:".ddcPlayer-holder",targetid:void 0,playerid:void 0,wrapperelement:'<div class="ddc-video-wrapper" />',accountid:void 0,vehicleid:void 0,videourl:void 0,ddcplaylist:void 0,useprepostroll:void 0,prerollplaylist:void 0,postrollplaylist:void 0,locale:void 0,localeskin:"glowddc",jwplaylist:[],jwsettings:{}},S,Y={ddc:{viewTypeVideo:16},ga:{id:"UA-9899509-3",category:"Video"}},A={ddc:void 0,ga:void 0},X=G+"common/tracker/tracker.min.js",
T;m.version="2.14";m.jwplayerPath=ba;m.proxyPath=null;m.localeSkins=B;m.jwDefaults=O;m.wrappers=[];m.init=J;m.embed=n;m.onReady=L;m.getWrapper=I;m.getAllWrappers=function(){return this.wrappers};m.getPlayer=function(a){var b,c;"string"===typeof a?b=a:a instanceof jQuery&&(b=a.attr("id"));if(a=this.getWrapper(a))c=a.jwPlayerInstance;!c&&window.jwplayer&&(c=window.jwplayer(b));return c};m.getAllPlayers=function(){for(var a=[],b=this.wrappers.length-1;0<=b;b--)this.wrappers[b].jwPlayerInstance&&a.push(this.wrappers[b].jwPlayerInstance);
return a};m.getAllPlayerIds=function(){for(var a=[],b=this.wrappers.length-1;0<=b;b--)a.push(this.wrappers[b].options.playerid);return a};window.onbeforeunload=function(){var a=[];try{for(var a=DDC.Video.getAllPlayers(),b=0;b<a.length;b++)a[b].remove()}catch(c){window.console&&window.console.log&&console.log("DDC.Video unable to clean up players.")}};var l=function(a){this.options=a;this.jwPlayerInstance=this.hasPreroll=this.postrollPlaylistPromise=this.prerollPlaylistPromise=this.mainPlaylistPromise=
this.playlistPromise=void 0;this.playerState="created"};l.prototype.init=D;l.prototype.embed=Q;l.prototype.onEmbed=function(){var a,b,c,d,f,h,g={play:!1,0:!1,25:!1,50:!1,75:!1,100:!1};if(this instanceof l&&window.jwplayer&&this.options.targetid&&this.options.playerid){a=this;f=y(a.options,a);d=a.options.playerid;if(a.jwPlayerInstance&&a.jwPlayerInstance.hasOwnProperty("remove"))try{a.jwPlayerInstance.remove()}catch(k){a.playerState="initializing"}"initializing"!=a.playerState&&(a.playerState="initializing",
b=e("<div />").attr("id",d).addClass("jwplayer"),f.html(b).addClass("jwplayer-loading"),b.wrap(a.options.wrapperelement),b=V(a.options,DDC.Video.jwDefaults),c=a.jwPlayerInstance=window.jwplayer(d).setup(b),c.onReady(function(){a.playerState="ready";a.playlistPromise=a.prerollPlaylistPromise=a.postrollPlaylistPromise=null;"flash"==this.getRenderingMode()?e(this.container).parent().addClass("jwplayer jwplayer-flash"):e(this.container).addClass("jwplayer jwplayer-html5");f.removeClass("jwplayer-loading");
if(a.onEmbedReadyCallback&&"function"===typeof a.onEmbedReadyCallback)try{a.onEmbedReadyCallback.call(c)}catch(b){window.console&&window.console.log&&console.log("Videoplayer error in onReady callback",b)}}),c.onSetupError(function(b,c){a.playlistPromise=a.prerollPlaylistPromise=a.postrollPlaylistPromise=null;e("#"+d).addClass("jwplayer jwplayer-error");window.console&&window.console.log&&console.log("Player setup error",b,c)}),c.onError(function(a){var b,c;try{b=this.getPlaylist(),c=this.getPlaylistIndex(),
1<b.length&&(b.splice(c,1),this.load(b),this.play())}catch(d){window.console&&window.console.log&&console.log("Player error",a)}}),h=M(a.options.ddcplaylist),c.onPlay(function(b){b=this.getPlaylistItem();var c=this.getPlaylistIndex(),d={};try{0===c&&a.hasPreroll&&e.cookie&&e.cookie("prerollViewed","true",{expires:1}),d.eventName="play",d.playlistPath=h,d.videoPath=b.file,g.play||(g.play=!0,A.hasOwnProperty("trackEvent")&&A.trackEvent(d))}catch(f){window.console&&window.console.log&&console.log("tracking error, could not log play")}}),
c.onTime(function(a){var b;a=0<a.duration?a.position/a.duration:0;var c,d={};try{0<a&&!g["0"]?(g["0"]=!0,c="0"):.25<=a&&!g["25"]?(g["25"]=!0,c="25"):.5<=a&&!g["50"]?(g["50"]=!0,c="50"):.75<=a&&!g["75"]?(g["75"]=!0,c="75"):.99<=a&&!g["100"]&&(g["100"]=!0,c="100"),void 0!=c&&(b=this.getPlaylistItem(),d.eventName="progress",d.playlistPath=h,d.videoPath=b.file,d.progress=c,A.hasOwnProperty("trackEvent")&&A.trackEvent(d))}catch(e){window.console&&window.console.log&&console.log("tracking error, could not log onProgress")}}))}else window.console&&
window.console.log&&console.log("Videoplayer could not embed into "+this.options.targetid)};l.prototype.onReady=function(a){try{"function"===typeof a&&this instanceof l&&(this.onEmbedReadyCallback=a)}catch(b){window.console&&window.console.log&&console.log("Videoplayer could not set up onReady callback",b)}};var p=function(a){this.wrappers=[];this.options=a};p.prototype.addWrapper=H;p.prototype.getWrapper=I;p.prototype.init=J;p.prototype.embed=n;p.prototype.onReady=L;p.prototype.doFnEachWrapper=h;
var N=function(a){var b=a;(window.DDC.i18n||{}).getLabel&&(b=DDC.i18n.getLabel(a));b||(b=a);return b};return m}(jQuery);
